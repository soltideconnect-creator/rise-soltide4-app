<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="/rise-icon.png" />
    <link rel="apple-touch-icon" href="/rise-icon.png" />
    <link rel="manifest" href="/manifest.json" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <meta name="theme-color" content="#5E5CE6" />
    <meta name="description" content="Unbreakable streaks meet perfect mornings. The only habit tracker that protects your streaks with sleep intelligence." />
    
    <!-- PWA Meta Tags -->
    <meta name="application-name" content="Rise" />
    <meta name="format-detection" content="telephone=no" />
    
    <!-- iOS PWA Support -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Rise" />
    
    <!-- Android PWA Support -->
    <meta name="mobile-web-app-capable" content="yes" />
    
    <!-- Windows PWA Support -->
    <meta name="msapplication-TileColor" content="#5E5CE6" />
    <meta name="msapplication-tap-highlight" content="no" />
    
    <!-- Cache Control - Force fresh content on Android browsers -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    
    <!-- Payment Feature Policy - Required for Google Play Billing in TWA -->
    <meta http-equiv="Feature-Policy" content="payment 'self' https://play.google.com" />
    <meta http-equiv="Permissions-Policy" content="payment=(self)" />
    
    <!-- Content Security Policy - Allows Paystack payment integration -->
    <!-- FIXED: Removed CSP that was blocking JavaScript execution -->
    <!-- CSP was causing blank screen - JavaScript couldn't run -->
    <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self' https://js.paystack.co https://api.paystack.co; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://js.paystack.co; style-src 'self' 'unsafe-inline' https:; img-src 'self' data: https:; font-src 'self' data: https:; connect-src 'self' https: https://api.paystack.co; frame-src 'self' https://checkout.paystack.co https://standard.paystack.co; child-src 'self' https://checkout.paystack.co https://standard.paystack.co; manifest-src 'self';" /> -->
    
    <!-- SEO & Social Meta Tags -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://rise-soltide-app.netlify.app/" />
    <meta property="og:title" content="Rise â€“ Habit Tracker & Smart Sleep" />
    <meta property="og:description" content="Unbreakable streaks meet perfect mornings. The only habit tracker that protects your streaks with sleep intelligence." />
    <meta property="og:site_name" content="Rise" />
    <meta property="og:image" content="https://rise-soltide-app.netlify.app/og-image.png" />
    <meta property="og:image:secure_url" content="https://rise-soltide-app.netlify.app/og-image.png" />
    <meta property="og:image:width" content="1344" />
    <meta property="og:image:height" content="768" />
    <meta property="og:image:type" content="image/png" />
    <meta property="og:image:alt" content="Rise - Habit Tracker & Smart Sleep App" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@rise" />
    <meta name="twitter:title" content="Rise â€“ Habit Tracker & Smart Sleep" />
    <meta name="twitter:description" content="Unbreakable streaks meet perfect mornings. The only habit tracker that protects your streaks with sleep intelligence." />
    <meta name="twitter:image" content="https://rise-soltide-app.netlify.app/og-image.png" />
    <meta name="twitter:image:alt" content="Rise - Habit Tracker & Smart Sleep App" />
    
    <!-- Additional Social Meta Tags -->
    <meta name="keywords" content="habit tracker, streak tracker, sleep tracker, productivity app, daily habits, morning routine, habit building" />
    <meta name="author" content="Rise" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href="/" />
    
    <title>Rise â€“ Habit Tracker & Smart Sleep</title>
    
    <!-- Inline Critical CSS for Instant Loading -->
    <style>
      /* Prevent FOUC (Flash of Unstyled Content) */
      #root:empty {
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        background: #0a0a0a;
      }
      
      /* Loading indicator - shows immediately */
      #initial-loader {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 1rem;
        animation: fadeIn 0.3s ease-in;
      }
      
      #initial-loader .loader-icon {
        font-size: 3rem;
        animation: pulse 2s ease-in-out infinite;
      }
      
      #initial-loader .loader-text {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        font-size: 1.125rem;
        font-weight: 500;
        color: #ffffff;
        animation: fadeInUp 0.5s ease-out 0.2s both;
      }
      
      #initial-loader .loader-subtext {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        font-size: 0.875rem;
        color: #a1a1aa;
        animation: fadeInUp 0.5s ease-out 0.4s both;
      }
      
      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }
      
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      
      @keyframes pulse {
        0%, 100% { 
          transform: scale(1);
          opacity: 1;
        }
        50% { 
          transform: scale(1.1);
          opacity: 0.8;
        }
      }
      
      /* Hide loader once React mounts */
      #root:not(:empty) + #initial-loader {
        display: none;
      }
    </style>
  </head>
  <body>
    <!-- React Root -->
    <div id="root"></div>
    
    <!-- Initial Loading Indicator - Shows immediately while React loads -->
    <div id="initial-loader">
      <div class="loader-icon">ðŸ”¥</div>
      <div class="loader-text">Loading Rise...</div>
      <div class="loader-subtext">Building your habits</div>
    </div>
    
    <!-- Main App Script -->
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- Remove loader once React mounts -->
    <script>
      // Performance monitoring
      const startTime = performance.now();
      console.log('[Perf] Page load started');
      
      // Remove loader once React renders
      const checkReactMount = setInterval(() => {
        const root = document.getElementById('root');
        const loader = document.getElementById('initial-loader');
        
        if (root && root.children.length > 0) {
          console.log('[Perf] React mounted in', Math.round(performance.now() - startTime), 'ms');
          if (loader) {
            loader.style.opacity = '0';
            loader.style.transition = 'opacity 0.3s ease-out';
            setTimeout(() => loader.remove(), 300);
          }
          clearInterval(checkReactMount);
        }
      }, 50);
      
      // Fallback: Remove loader after 10 seconds even if React doesn't mount
      setTimeout(() => {
        const loader = document.getElementById('initial-loader');
        if (loader) {
          console.warn('[Perf] React did not mount within 10 seconds, removing loader anyway');
          loader.remove();
        }
        clearInterval(checkReactMount);
      }, 10000);
    </script>
  </body>
</html>
